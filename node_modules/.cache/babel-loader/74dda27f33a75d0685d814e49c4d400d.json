{"ast":null,"code":"import _regeneratorRuntime from \"/home/nino420/Desktop/TodoReactApp/Firebase-auth-chat-app-master/node_modules/@babel/runtime/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(worker_updateProfileData);\n\nimport { put } from 'redux-saga/effects';\nimport { toast } from 'react-toastify';\nimport { updateProfileDataError, updateProfileDataSuccess } from './actions';\nimport { firebase_app } from '../../../api/firebase';\nexport function worker_updateProfileData(action) {\n  var infoToastID, _firebase_app$auth$cu, userId, doc, _action$payload, firstName, lastName;\n\n  return _regeneratorRuntime.wrap(function worker_updateProfileData$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          userId = (_firebase_app$auth$cu = firebase_app.auth().currentUser) === null || _firebase_app$auth$cu === void 0 ? void 0 : _firebase_app$auth$cu.uid;\n\n          if (!userId) {\n            _context.next = 14;\n            break;\n          }\n\n          infoToastID = toast.info('Loading');\n          doc = firebase_app.firestore().collection('profiles').doc(userId);\n          _action$payload = action.payload, firstName = _action$payload.firstName, lastName = _action$payload.lastName;\n          _context.next = 8;\n          return doc.update({\n            firstName: firstName,\n            lastName: lastName\n          });\n\n        case 8:\n          // create new\n          toast.dismiss(infoToastID);\n          toast.success('Profile data updated');\n          _context.next = 12;\n          return put(updateProfileDataSuccess());\n\n        case 12:\n          _context.next = 15;\n          break;\n\n        case 14:\n          toast.error('You are not logged in');\n\n        case 15:\n          _context.next = 23;\n          break;\n\n        case 17:\n          _context.prev = 17;\n          _context.t0 = _context[\"catch\"](0);\n          toast.dismiss(infoToastID);\n          toast.error(_context.t0.message);\n          _context.next = 23;\n          return put(updateProfileDataError(_context.t0));\n\n        case 23:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[0, 17]]);\n}","map":{"version":3,"sources":["/home/nino420/Desktop/TodoReactApp/Firebase-auth-chat-app-master/src/store/profile/updateProfileData/sagas.ts"],"names":["worker_updateProfileData","put","toast","updateProfileDataError","updateProfileDataSuccess","firebase_app","action","userId","auth","currentUser","uid","infoToastID","info","doc","firestore","collection","payload","firstName","lastName","update","dismiss","success","error","message"],"mappings":";;;;yBAMiBA,wB;;AANjB,SAASC,GAAT,QAAoB,oBAApB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,sBAAT,EAAiCC,wBAAjC,QAAiE,WAAjE;AACA,SAASC,YAAT,QAA6B,uBAA7B;AAGA,OAAO,SAAUL,wBAAV,CACHM,MADG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAKOC,UAAAA,MALP,4BAKgBF,YAAY,CAACG,IAAb,GAAoBC,WALpC,0DAKgB,sBAAiCC,GALjD;;AAAA,eAMKH,MANL;AAAA;AAAA;AAAA;;AAOKI,UAAAA,WAAW,GAAGT,KAAK,CAACU,IAAN,CAAW,SAAX,CAAd;AAEMC,UAAAA,GATX,GASiBR,YAAY,CACnBS,SADO,GAEPC,UAFO,CAEI,UAFJ,EAGPF,GAHO,CAGHN,MAHG,CATjB;AAAA,4BAcqCD,MAAM,CAACU,OAd5C,EAcaC,SAdb,mBAcaA,SAdb,EAcwBC,QAdxB,mBAcwBA,QAdxB;AAAA;AAgBK,iBAAML,GAAG,CAACM,MAAJ,CAAW;AAAEF,YAAAA,SAAS,EAATA,SAAF;AAAaC,YAAAA,QAAQ,EAARA;AAAb,WAAX,CAAN;;AAhBL;AAgB2D;AAEtDhB,UAAAA,KAAK,CAACkB,OAAN,CAAcT,WAAd;AACAT,UAAAA,KAAK,CAACmB,OAAN,CAAc,sBAAd;AAnBL;AAqBK,iBAAMpB,GAAG,CAACG,wBAAwB,EAAzB,CAAT;;AArBL;AAAA;AAAA;;AAAA;AAuBKF,UAAAA,KAAK,CAACoB,KAAN,CAAY,uBAAZ;;AAvBL;AAAA;AAAA;;AAAA;AAAA;AAAA;AA0BCpB,UAAAA,KAAK,CAACkB,OAAN,CAAcT,WAAd;AACAT,UAAAA,KAAK,CAACoB,KAAN,CAAY,YAAMC,OAAlB;AA3BD;AA6BC,iBAAMtB,GAAG,CAACE,sBAAsB,aAAvB,CAAT;;AA7BD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { put } from 'redux-saga/effects';\nimport { toast } from 'react-toastify';\nimport { updateProfileDataError, updateProfileDataSuccess } from './actions';\nimport { firebase_app } from '../../../api/firebase';\nimport { Profile } from '../../../types/Profile';\n\nexport function* worker_updateProfileData(\n    action: Record<'payload', Profile>,\n): IterableIterator<any> {\n    let infoToastID;\n    try {\n        const userId = firebase_app.auth().currentUser?.uid;\n        if (userId) {\n            infoToastID = toast.info('Loading');\n\n            const doc = firebase_app\n                .firestore()\n                .collection('profiles')\n                .doc(userId);\n\n            const { firstName, lastName } = action.payload;\n\n            yield doc.update({ firstName, lastName } as Profile); // create new\n\n            toast.dismiss(infoToastID);\n            toast.success('Profile data updated');\n\n            yield put(updateProfileDataSuccess());\n        } else {\n            toast.error('You are not logged in');\n        }\n    } catch (error) {\n        toast.dismiss(infoToastID);\n        toast.error(error.message);\n\n        yield put(updateProfileDataError(error));\n    }\n}\n"]},"metadata":{},"sourceType":"module"}