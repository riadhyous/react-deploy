{"ast":null,"code":"import _regeneratorRuntime from \"/home/nino420/Desktop/TodoReactApp/Firebase-auth-chat-app-master/node_modules/@babel/runtime/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(worker_deleteProfileData);\n\nimport { put } from 'redux-saga/effects';\nimport { toast } from 'react-toastify';\nimport { deleteProfileDataError, deleteProfileDataSuccess } from './actions';\nimport { firebase_app } from '../../../api/firebase';\nexport function worker_deleteProfileData() {\n  var infoToastID, _firebase_app$auth$cu, userId, documentReference;\n\n  return _regeneratorRuntime.wrap(function worker_deleteProfileData$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          userId = (_firebase_app$auth$cu = firebase_app.auth().currentUser) === null || _firebase_app$auth$cu === void 0 ? void 0 : _firebase_app$auth$cu.uid;\n\n          if (!userId) {\n            _context.next = 13;\n            break;\n          }\n\n          infoToastID = toast.info('Loading');\n          documentReference = firebase_app.firestore().collection('profiles').doc(userId);\n          _context.next = 7;\n          return documentReference.delete();\n\n        case 7:\n          toast.dismiss(infoToastID);\n          toast.success('Profile data deleted');\n          _context.next = 11;\n          return put(deleteProfileDataSuccess());\n\n        case 11:\n          _context.next = 14;\n          break;\n\n        case 13:\n          toast.error('You are not logged in');\n\n        case 14:\n          _context.next = 22;\n          break;\n\n        case 16:\n          _context.prev = 16;\n          _context.t0 = _context[\"catch\"](0);\n          toast.dismiss(infoToastID);\n          toast.error(_context.t0.message);\n          _context.next = 22;\n          return put(deleteProfileDataError(_context.t0));\n\n        case 22:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[0, 16]]);\n}","map":{"version":3,"sources":["/home/nino420/Desktop/TodoReactApp/Firebase-auth-chat-app-master/src/store/profile/deleteProfileData/sagas.ts"],"names":["worker_deleteProfileData","put","toast","deleteProfileDataError","deleteProfileDataSuccess","firebase_app","userId","auth","currentUser","uid","infoToastID","info","documentReference","firestore","collection","doc","delete","dismiss","success","error","message"],"mappings":";;;;yBAKiBA,wB;;AALjB,SAASC,GAAT,QAAoB,oBAApB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,sBAAT,EAAiCC,wBAAjC,QAAiE,WAAjE;AACA,SAASC,YAAT,QAA6B,uBAA7B;AAEA,OAAO,SAAUL,wBAAV;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAGOM,UAAAA,MAHP,4BAGgBD,YAAY,CAACE,IAAb,GAAoBC,WAHpC,0DAGgB,sBAAiCC,GAHjD;;AAAA,eAIKH,MAJL;AAAA;AAAA;AAAA;;AAKKI,UAAAA,WAAW,GAAGR,KAAK,CAACS,IAAN,CAAW,SAAX,CAAd;AAEMC,UAAAA,iBAPX,GAO+BP,YAAY,CAACQ,SAAb,GAAyBC,UAAzB,CAAoC,UAApC,EAAgDC,GAAhD,CAAoDT,MAApD,CAP/B;AAAA;AASK,iBAAMM,iBAAiB,CAACI,MAAlB,EAAN;;AATL;AAWKd,UAAAA,KAAK,CAACe,OAAN,CAAcP,WAAd;AACAR,UAAAA,KAAK,CAACgB,OAAN,CAAc,sBAAd;AAZL;AAcK,iBAAMjB,GAAG,CAACG,wBAAwB,EAAzB,CAAT;;AAdL;AAAA;AAAA;;AAAA;AAgBKF,UAAAA,KAAK,CAACiB,KAAN,CAAY,uBAAZ;;AAhBL;AAAA;AAAA;;AAAA;AAAA;AAAA;AAmBCjB,UAAAA,KAAK,CAACe,OAAN,CAAcP,WAAd;AACAR,UAAAA,KAAK,CAACiB,KAAN,CAAY,YAAMC,OAAlB;AApBD;AAsBC,iBAAMnB,GAAG,CAACE,sBAAsB,aAAvB,CAAT;;AAtBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { put } from 'redux-saga/effects';\nimport { toast } from 'react-toastify';\nimport { deleteProfileDataError, deleteProfileDataSuccess } from './actions';\nimport { firebase_app } from '../../../api/firebase';\n\nexport function* worker_deleteProfileData(): IterableIterator<any> {\n    let infoToastID;\n    try {\n        const userId = firebase_app.auth().currentUser?.uid;\n        if (userId) {\n            infoToastID = toast.info('Loading');\n\n            const documentReference = firebase_app.firestore().collection('profiles').doc(userId);\n\n            yield documentReference.delete();\n\n            toast.dismiss(infoToastID);\n            toast.success('Profile data deleted');\n\n            yield put(deleteProfileDataSuccess());\n        } else {\n            toast.error('You are not logged in');\n        }\n    } catch (error) {\n        toast.dismiss(infoToastID);\n        toast.error(error.message);\n\n        yield put(deleteProfileDataError(error));\n    }\n}\n"]},"metadata":{},"sourceType":"module"}