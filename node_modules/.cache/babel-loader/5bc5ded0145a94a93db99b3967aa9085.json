{"ast":null,"code":"import _regeneratorRuntime from \"/home/nino420/Desktop/TodoReactApp/Firebase-auth-chat-app-master/node_modules/@babel/runtime/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(worker_setProfileData);\n\nimport { put } from 'redux-saga/effects';\nimport { toast } from 'react-toastify';\nimport { setProfileDataError, setProfileDataSuccess } from './actions';\nimport { firebase_app } from '../../../api/firebase';\nexport function worker_setProfileData(action) {\n  var infoToastID, _firebase_app$auth$cu, userId, doc, _action$payload, firstName, lastName;\n\n  return _regeneratorRuntime.wrap(function worker_setProfileData$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          userId = (_firebase_app$auth$cu = firebase_app.auth().currentUser) === null || _firebase_app$auth$cu === void 0 ? void 0 : _firebase_app$auth$cu.uid;\n\n          if (!userId) {\n            _context.next = 14;\n            break;\n          }\n\n          infoToastID = toast.info('Loading');\n          doc = firebase_app.firestore().collection('profiles').doc(userId);\n          _action$payload = action.payload, firstName = _action$payload.firstName, lastName = _action$payload.lastName;\n          _context.next = 8;\n          return doc.set({\n            firstName: firstName,\n            lastName: lastName\n          });\n\n        case 8:\n          // create new\n          toast.dismiss(infoToastID);\n          toast.success('Profile data saved');\n          _context.next = 12;\n          return put(setProfileDataSuccess());\n\n        case 12:\n          _context.next = 15;\n          break;\n\n        case 14:\n          toast.error('You are not logged in');\n\n        case 15:\n          _context.next = 23;\n          break;\n\n        case 17:\n          _context.prev = 17;\n          _context.t0 = _context[\"catch\"](0);\n          toast.dismiss(infoToastID);\n          toast.error(_context.t0.message);\n          _context.next = 23;\n          return put(setProfileDataError(_context.t0));\n\n        case 23:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[0, 17]]);\n}","map":{"version":3,"sources":["/home/nino420/Desktop/TodoReactApp/Firebase-auth-chat-app-master/src/store/profile/setProfileData/sagas.ts"],"names":["worker_setProfileData","put","toast","setProfileDataError","setProfileDataSuccess","firebase_app","action","userId","auth","currentUser","uid","infoToastID","info","doc","firestore","collection","payload","firstName","lastName","set","dismiss","success","error","message"],"mappings":";;;;yBAMiBA,qB;;AANjB,SAASC,GAAT,QAAoB,oBAApB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,mBAAT,EAA8BC,qBAA9B,QAA2D,WAA3D;AACA,SAASC,YAAT,QAA6B,uBAA7B;AAGA,OAAO,SAAUL,qBAAV,CAAgCM,MAAhC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAGOC,UAAAA,MAHP,4BAGgBF,YAAY,CAACG,IAAb,GAAoBC,WAHpC,0DAGgB,sBAAiCC,GAHjD;;AAAA,eAIKH,MAJL;AAAA;AAAA;AAAA;;AAKKI,UAAAA,WAAW,GAAGT,KAAK,CAACU,IAAN,CAAW,SAAX,CAAd;AAEMC,UAAAA,GAPX,GAOiBR,YAAY,CAACS,SAAb,GAAyBC,UAAzB,CAAoC,UAApC,EAAgDF,GAAhD,CAAoDN,MAApD,CAPjB;AAAA,4BASqCD,MAAM,CAACU,OAT5C,EASaC,SATb,mBASaA,SATb,EASwBC,QATxB,mBASwBA,QATxB;AAAA;AAWK,iBAAML,GAAG,CAACM,GAAJ,CAAQ;AAAEF,YAAAA,SAAS,EAATA,SAAF;AAAaC,YAAAA,QAAQ,EAARA;AAAb,WAAR,CAAN;;AAXL;AAWwD;AAEnDhB,UAAAA,KAAK,CAACkB,OAAN,CAAcT,WAAd;AACAT,UAAAA,KAAK,CAACmB,OAAN,CAAc,oBAAd;AAdL;AAgBK,iBAAMpB,GAAG,CAACG,qBAAqB,EAAtB,CAAT;;AAhBL;AAAA;AAAA;;AAAA;AAkBKF,UAAAA,KAAK,CAACoB,KAAN,CAAY,uBAAZ;;AAlBL;AAAA;AAAA;;AAAA;AAAA;AAAA;AAqBCpB,UAAAA,KAAK,CAACkB,OAAN,CAAcT,WAAd;AACAT,UAAAA,KAAK,CAACoB,KAAN,CAAY,YAAMC,OAAlB;AAtBD;AAwBC,iBAAMtB,GAAG,CAACE,mBAAmB,aAApB,CAAT;;AAxBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { put } from 'redux-saga/effects';\nimport { toast } from 'react-toastify';\nimport { setProfileDataError, setProfileDataSuccess } from './actions';\nimport { firebase_app } from '../../../api/firebase';\nimport { Profile } from '../../../types/Profile';\n\nexport function* worker_setProfileData(action: Record<'payload', Profile>): IterableIterator<any> {\n    let infoToastID;\n    try {\n        const userId = firebase_app.auth().currentUser?.uid;\n        if (userId) {\n            infoToastID = toast.info('Loading');\n\n            const doc = firebase_app.firestore().collection('profiles').doc(userId);\n\n            const { firstName, lastName } = action.payload;\n\n            yield doc.set({ firstName, lastName } as Profile); // create new\n\n            toast.dismiss(infoToastID);\n            toast.success('Profile data saved');\n\n            yield put(setProfileDataSuccess());\n        } else {\n            toast.error('You are not logged in');\n        }\n    } catch (error) {\n        toast.dismiss(infoToastID);\n        toast.error(error.message);\n\n        yield put(setProfileDataError(error));\n    }\n}\n"]},"metadata":{},"sourceType":"module"}